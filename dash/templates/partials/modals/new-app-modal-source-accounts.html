<div id="modal-app-sources" class="col" hx-get="/html/modal/app/sources" hx-swap="outerHTML">
  <div id="accounts-form" class="mb-3">
    <label class="form-label">Source</label>
    <select name="account" type="text" class="form-select" id="select-source-account" value="">
      {% for account in accounts %}
      <option value="{{ account.1 }}" data-custom-properties="&lt;span class=&quot;avatar avatar-xs&quot; style=&quot;background-image: url({{ account.0 }})&quot;&gt;&lt;/span&gt;">{{ account.1 }}</option>
      {% endfor %}
    </select>
  </div>
</div>
<script>
  // @formatter:off
  var func = function () {
  	var el;
  	window.TomSelect && (new TomSelect(el = document.getElementById('select-source-account'), {
  		copyClassesToDropdown: false,
  		dropdownParent: 'body',
  		controlInput: '<input>',
  		render:{
  			item: function(data,escape) {
  				if( data.customProperties ){
  					return '<div><span class="dropdown-item-indicator">' + data.customProperties + '</span>' + escape(data.text) + '</div>';
  				}
  				return '<div>' + escape(data.text) + '</div>';
  			},
  			option: function(data,escape){
  				if( data.customProperties ){
  					return '<div><span class="dropdown-item-indicator">' + data.customProperties + '</span>' + escape(data.text) + '</div>';
  				}
  				return '<div>' + escape(data.text) + '</div>';
  			},
  		},
  	}));
  };
  document.addEventListener("DOMContentLoaded", func);
  document.addEventListener("htmx:afterSettle", func);
// @formatter:on
</script>
